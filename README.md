# backend faker
Uses express to set up a fake "backend" that will return JSON generated by faker.

## installation
Run `npm install backend-faker` in your project directory.

## usage

Run with `backend-faker`

NOTE: This only supports GET at the moment!

Create a `backend.json` file in your project folder. `backend.json` sample:
```json
[
    {
        "/fake/response/:id": {
            "first_name": "firstName",
            "company_name": "companyName"
        }
    }
]
```

Each value nested under a path is the name of a faker method. 

Following the former example, a call to `/fake/response/123` would produce
```json
{"first_name": "SomeFirstName", "company_name": "Random Company Name"}
```

### lists
```json
[
    {
        "/i/want/a/list/of/stuff/:id": {
            "_LIST_": 20,
            "first_name": "firstName",
            "last_name": "lastName"
        }
    }
]
```
You can configure your backend to return a list of results. `_LIST_` tells backend-faker that you expect a list of
the provided key/value pairs. So, a request to `localhost:2000/i/want/a/list/of/stuff/123` would produce a list of 
`{"first_name": "SomeFirstName", "last_name": "SomeLastName"}` containing a maximum of 20 results.

Including `/:id` in a path will cache the result of the first call, using that segment of the path as an id for future reference. Thus, a request to `/fake/response/123` will only generate new data the first time it was called, calling it again would return that same data.

### connections
```json
[
    {
        "/list/of/stuff/:id": {
            "_LIST_": 20,
            "id": "number",
            "first_name": "firstName",
            "last_name": "lastName"
        }
    },
    {
        "/profile/:id": {
            "_CONNECT_": "/i/want/a/list/of/stuff/:id",
            "id": "number",
            "profilePic": "avatar",
            "email_address": "email",
            "country": "country"
        }
    }
]
```
Specifying a previously defined path as a value of `_CONNECT_` will match the provided id with an id in the result of the previously defined path and extend the response with that result.

This can be useful for loading an extended fake profile for example: A request is made for `"/list/of/stuff/:id"`. From that list, a profile with the id of `123` is clicked, thus a request to `/profile/:id` is made. Since `/profile/:id` contains a `_CONNECT_` key, it will find an element containing a matching ID in the cached response of `/list/of/stuff/:id`, extend that element with the `/profile/:id` response and return it.

